function list_menu() {
    var menu = [
        'Nasi Goreng',
        'Indomie Goreng',
        'Nasi Ayam',
        'Ayam Goreng',
        'Ayam Bakar',
        'Ayam Rica-Rica',
        'Ayam Kecap',
        'Ayam Sambal',
        'Ayam Rendang',
        'Ayam Gulai',
        'Cumi Saus Tiram',
        'Cumi Sambal',
        'Cumi Bakar',
        'Sup Iga',
        'Iga Bakar',
        'Daging Rendang',
        'Daging Balado',
        'Daging Gulai',
        'Chicken Katsu',
        'Chicken Steak',
        'Wagyu Steak',
        'Popcorn Chicken',
        'Salmon Teriyaki',
        'Baked Salmon',
        'Crispy Calamari',
        'Burger',
        'Pizza',
        'La Pasta',
        'Spagheti',
        'Salad',
        'Chocolate Cake',
        'Green Tea Cake',
        'Tiramisu Cake',
        'Coffee Cake',
        'Vanilla Cake',
        'Cheese Cake',
        'Red Velvet Cake',
        'Berry Cake',
        'Cupcake',
        'Pancake',
        'Brownies',
        'Crepes',
        'Croffle',
        'Glazed Donuts',
        'Roti Bakar',
        'Mochi',
        'Ice Cream',
        'Gelato',
        'Pudding',
        'Jus Alpukat',
        'Jus Anggur',
        'Jus Apel',
        'Jus Apricot',
        'Jus Belimbing',
        'Jus Buah Naga',
        'Jus Bluberi',
        'Jus Jambu',
        'Jus Jeruk',
        'Jus Kiwi',
        'Jus Leci',
        'Jus Mangga',
        'Jus Manggis',
        'Jus Melon',
        'Jus Nanas',
        'Jus Pisang',
        'Jus Peach',
        'Jus Pepaya',
        'Jus Semangka',
        'Jus Sirsak',
        'Jus Stroberi',
        'Air Mineral',
        'Milkshake',
        'Fruit Tea',
        'Latte',
        'Cappuccino',
        'Macchiato',
        'Ice Blend',
        'Iced Tea',
        'Ice Chocolate',
        'Hot Chocolate',
        'Hot Tea',
        'Green Tea Float',
        'Berry Float',
        'Mocha Float'
    ];

    return menu;
}

function list_harga_menu() {
    var menu = {
        'Nasi Goreng': 15000,
        'Indomie Goreng': 10000,
        'Nasi Ayam': 20000,
        'Ayam Goreng': 23000,
        'Ayam Bakar': 25000,
        'Ayam Rica-Rica': 25000,
        'Ayam Kecap': 25000,
        'Ayam Sambal': 25000,
        'Ayam Rendang': 25000,
        'Ayam Gulai': 25000,
        'Cumi Saus Tiram': 28000,
        'Cumi Sambal': 28000,
        'Cumi Bakar': 30000,
        'Sup Iga': 45000,
        'Iga Bakar': 60000,
        'Daging Rendang': 32000,
        'Daging Balado': 32000,
        'Daging Gulai': 32000,
        'Chicken Katsu': 55000,
        'Chicken Steak': 60000,
        'Wagyu Steak': 105000,
        'Popcorn Chicken': 45000,
        'Salmon Teriyaki': 90000,
        'Baked Salmon': 90000,
        'Crispy Calamari': 50000,
        'Burger': 40000,
        'Pizza': 85000,
        'La Pasta': 55000,
        'Spagheti': 55000,
        'Salad': 50000,
        'Chocolate Cake': 35000,
        'Green Tea Cake': 35000,
        'Tiramisu Cake': 35000,
        'Coffee Cake': 35000,
        'Vanilla Cake': 35000,
        'Cheese Cake': 35000,
        'Red Velvet Cake': 35000,
        'Berry Cake': 35000,
        'Cupcake': 30000,
        'Pancake': 30000,
        'Brownies': 30000,
        'Crepes': 30000,
        'Croffle': 35000,
        'Glazed Donuts': 35000,
        'Roti Bakar': 20000,
        'Mochi': 30000,
        'Ice Cream': 25000,
        'Gelato': 25000,
        'Pudding': 20000,
        'Jus Alpukat': 20000,
        'Jus Anggur': 20000,
        'Jus Apel': 20000,
        'Jus Apricot': 25000,
        'Jus Belimbing': 20000,
        'Jus Buah Naga': 20000,
        'Jus Bluberi': 25000,
        'Jus Jambu': 20000,
        'Jus Jeruk': 20000,
        'Jus Kiwi': 20000,
        'Jus Leci': 25000,
        'Jus Mangga': 20000,
        'Jus Manggis': 20000,
        'Jus Melon': 20000,
        'Jus Nanas': 20000,
        'Jus Pisang': 20000,
        'Jus Peach': 25000,
        'Jus Pepaya': 20000,
        'Jus Semangka': 20000,
        'Jus Sirsak': 20000,
        'Jus Stroberi': 25000,
        'Air Mineral': 10000,
        'Milkshake': 20000,
        'Fruit Tea': 15000,
        'Latte': 27000,
        'Cappuccino': 27000,
        'Macchiato': 27000,
        'Ice Blend': 25000,
        'Iced Tea': 20000,
        'Ice Chocolate': 20000,
        'Hot Chocolate': 20000,
        'Hot Tea': 20000,
        'Green Tea Float': 22000,
        'Berry Float': 22000,
        'Mocha Float': 22000
    };
    return menu;
}

function list_category_menu() {
    var menu = {
        'Nasi Goreng': 'makanan',
        'Indomie Goreng': 'makanan',
        'Nasi Ayam': 'makanan',
        'Ayam Goreng': 'makanan',
        'Ayam Bakar': 'makanan',
        'Ayam Rica-Rica': 'makanan',
        'Ayam Kecap': 'makanan',
        'Ayam Sambal': 'makanan',
        'Ayam Rendang': 'makanan',
        'Ayam Gulai': 'makanan',
        'Cumi Saus Tiram': 'makanan',
        'Cumi Sambal': 'makanan',
        'Cumi Bakar': 'makanan',
        'Sup Iga': 'makanan',
        'Iga Bakar': 'makanan',
        'Daging Rendang': 'makanan',
        'Daging Balado': 'makanan',
        'Daging Gulai': 'makanan',
        'Chicken Katsu': 'makanan',
        'Chicken Steak': 'makanan',
        'Wagyu Steak': 'makanan',
        'Popcorn Chicken': 'makanan',
        'Salmon Teriyaki': 'makanan',
        'Baked Salmon': 'makanan',
        'Crispy Calamari': 'makanan',
        'Burger': 'sidedish',
        'Pizza': 'sidedish',
        'La Pasta': 'sidedish',
        'Spagheti': 'sidedish',
        'Salad': 'sidedish',
        'Chocolate Cake': 'sidedish',
        'Green Tea Cake': 'sidedish',
        'Tiramisu Cake': 'sidedish',
        'Coffee Cake': 'sidedish',
        'Vanilla Cake': 'sidedish',
        'Cheese Cake': 'sidedish',
        'Red Velvet Cake': 'sidedish',
        'Berry Cake': 'sidedish',
        'Cupcake': 'sidedish',
        'Pancake': 'sidedish',
        'Brownies': 'sidedish',
        'Crepes': 'sidedish',
        'Croffle': 'sidedish',
        'Glazed Donuts': 'sidedish',
        'Roti Bakar': 'sidedish',
        'Mochi': 'sidedish',
        'Ice Cream': 'sidedish',
        'Gelato': 'sidedish',
        'Pudding': 'sidedish',
        'Jus Alpukat': 'minuman',
        'Jus Anggur': 'minuman',
        'Jus Apel': 'minuman',
        'Jus Apricot': 'minuman',
        'Jus Belimbing': 'minuman',
        'Jus Buah Naga': 'minuman',
        'Jus Bluberi': 'minuman',
        'Jus Jambu': 'minuman',
        'Jus Jeruk': 'minuman',
        'Jus Kiwi': 'minuman',
        'Jus Leci': 'minuman',
        'Jus Mangga': 'minuman',
        'Jus Manggis': 'minuman',
        'Jus Melon': 'minuman',
        'Jus Nanas': 'minuman',
        'Jus Pisang': 'minuman',
        'Jus Peach': 'minuman',
        'Jus Pepaya': 'minuman',
        'Jus Semangka': 'minuman',
        'Jus Sirsak': 'minuman',
        'Jus Stroberi': 'minuman',
        'Air Mineral': 'minuman',
        'Milkshake': 'minuman',
        'Fruit Tea': 'minuman',
        'Latte': 'minuman',
        'Cappuccino': 'minuman',
        'Macchiato': 'minuman',
        'Ice Blend': 'minuman',
        'Iced Tea': 'minuman',
        'Ice Chocolate': 'minuman',
        'Hot Chocolate': 'minuman',
        'Hot Tea': 'minuman',
        'Green Tea Float': 'minuman',
        'Berry Float': 'minuman',
        'Mocha Float': 'minuman'
    };
    return menu;
}

function food_list() {
    var menu = [
        'Nasi Goreng',
        'Indomie Goreng',
        'Nasi Ayam',
        'Ayam Goreng',
        'Ayam Bakar',
        'Ayam Rica-Rica',
        'Ayam Kecap',
        'Ayam Sambal',
        'Ayam Rendang',
        'Ayam Gulai',
        'Cumi Saus Tiram',
        'Cumi Sambal',
        'Cumi Bakar',
        'Sup Iga',
        'Iga Bakar',
        'Daging Rendang',
        'Daging Balado',
        'Daging Gulai',
        'Chicken Katsu',
        'Chicken Steak',
        'Wagyu Steak',
        'Popcorn Chicken',
        'Salmon Teriyaki',
        'Baked Salmon',
        'Crispy Calamari',
    ];

    return menu;
}

function sidedish_list() {
    var menu = [
        'Burger',
        'Pizza',
        'La Pasta',
        'Spagheti',
        'Salad',
        'Chocolate Cake',
        'Green Tea Cake',
        'Tiramisu Cake',
        'Coffee Cake',
        'Vanilla Cake',
        'Cheese Cake',
        'Red Velvet Cake',
        'Berry Cake',
        'Cupcake',
        'Pancake',
        'Brownies',
        'Crepes',
        'Croffle',
        'Glazed Donuts',
        'Roti Bakar',
        'Mochi',
        'Ice Cream',
        'Gelato',
        'Pudding',
    ];
    return menu;
}

function drink_list() {
    var menu = [
        'Jus Alpukat',
        'Jus Anggur',
        'Jus Apel',
        'Jus Apricot',
        'Jus Belimbing',
        'Jus Buah Naga',
        'Jus Bluberi',
        'Jus Jambu',
        'Jus Jeruk',
        'Jus Kiwi',
        'Jus Leci',
        'Jus Mangga',
        'Jus Manggis',
        'Jus Melon',
        'Jus Nanas',
        'Jus Pisang',
        'Jus Peach',
        'Jus Pepaya',
        'Jus Semangka',
        'Jus Sirsak',
        'Jus Stroberi',
        'Air Mineral',
        'Milkshake',
        'Fruit Tea',
        'Latte',
        'Cappuccino',
        'Macchiato',
        'Ice Blend',
        'Iced Tea',
        'Ice Chocolate',
        'Hot Chocolate',
        'Hot Tea',
        'Green Tea Float',
        'Berry Float',
        'Mocha Float'
    ];

    return menu;
}

$(document).ready(function () {
    // generate_menu('Halo', food_list(), 'bot');
    generate_message2('Halo! Saya Mia, pelayan AI restoran ini. Mia siap melayani pesanan makanan, minuman, dan side dish di sini.<br>Apabila Anda ingin melihat menu, silakan pilih mau list menu apa yang ingin Mia berikan terlebih dahulu.<br>Berikut beberapa pilihan : <br>- List Menu Makanan <br>- List Menu Minuman <br>- List Menu Side Dish <br>Silakan pilih salah satu pilihan di atas, dan Mia akan memberikan daftar menu yang sesuai. Jika Anda memiliki pertanyaan atau butuh bantuan, jangan ragu untuk mengajukannya. Selamat memesan!', 'bot');
});

$("#chat-submit1").click(function (e) {
    e.preventDefault();
    var msg = $("#chat-input1").val();
    if (msg.trim() == '') {
        return false;
    }
    generate_message1(msg, 'self');
    setTimeout(function () {
        try {
            $.ajax({
                url: "/api/deteksi",
                type: "POST",
                data: { "data": msg },
                success: function (res) {
                    console.log(res);
                    if (!Number.isNaN(Number(res['type']))) {
                        nama_menu = searchMenu(res['type']);
                        category = CategoryMenu(nama_menu);
                        if (category == "makanan") {
                            checkFoodPesanan(nama_menu)
                        } else if (category == "minuman") {
                            checkDrinkPesanan(nama_menu)
                        } else if (category == "sidedish") {
                            checkSidedishPesanan(nama_menu)
                        }
                        messageJumlahPesanMakanan(nama_menu);
                    } else {
                        res_data_prediksi = res['data'];
                        if (res['type'] == 'confirmation') {
                            if (checkListMenu() != false) {
                                res_data_prediksi = res['data']
                                messagetampilkanPesanan(res_data_prediksi);
                            } else {
                                messageWarningTambahPesanan();
                            }
                        } else if (res['type'] == 'makanan') {
                            generate_menu(res_data_prediksi, food_list(), 'bot');
                        } else if (res['type'] == 'minuman') {
                            generate_menu(res_data_prediksi, drink_list(), 'bot');
                        } else if (res['type'] == 'sidedish') {
                            generate_menu(res_data_prediksi, sidedish_list(), 'bot');
                        } else if (res['type'] == 'qty1') {
                            check_and_add_menu(1);
                        } else if (res['type'] == 'qty2') {
                            check_and_add_menu(2);
                        } else if (res['type'] == 'qty3') {
                            check_and_add_menu(3);
                        } else if (res['type'] == 'qty4') {
                            check_and_add_menu(4);
                        } else if (res['type'] == 'qty5') {
                            check_and_add_menu(5);
                        } else if (res['type'] == 'qty6') {
                            check_and_add_menu(6);
                        } else if (res['type'] == 'qty7') {
                            check_and_add_menu(7);
                        } else if (res['type'] == 'qty8') {
                            check_and_add_menu(8);
                        } else if (res['type'] == 'qty9') {
                            check_and_add_menu(9);
                        } else if (res['type'] == 'qty10') {
                            check_and_add_menu(10);
                        } else if (res['type'] == 'yes') {
                            generate_message2(res_data_prediksi, 'bot');
                        } else if (res['type'] == 'no') {
                            if (checkListMenu() != false) {
                                messagetampilkanPesananSelesai("Baik, Pesananmu sudah Mia masukkan kedalam waiting list ya, Silahkan menunggu.")
                                generate_message2(res_data_prediksi, 'bot');
                            } else {
                                messageWarningTambahPesanan();
                            }
                        } else if (res['type'] == 'qty_not_available') {
                            generate_message2(res_data_prediksi, 'bot');
                        } else if (res['type'] == 'payment') {
                            if (checkListMenu() != false) {
                                if (daftarPesanan.length == 0) {
                                    checkQty();
                                }
                                messagePayment(res_data_prediksi);
                            } else {
                                messageWarningTambahPesanan();
                            }
                        } else if (res['type'] == 'orderan') {
                            if (checkListMenu() != false) {
                                messagetampilkanPesananSelesai(res_data_prediksi);
                            } else {
                                messageWarningTambahPesanan();
                            }
                        } else {
                            generate_message2(res_data_prediksi, 'bot');
                        }
                    }
                }
            });
        }
        catch (e) {
            console.log("Gagal !");
            console.log(e);
            msg = '<b>[Gagal]</b><br>' + msg;
            generate_message2(msg, 'bot');
        }
    }, 1000)
})
var INDEX1 = 0;
var INDEX2 = 0;
var totalHarga = 0;
var total_bayar = 0;
var daftarPesanan = [];
var list_food = [];
var list_drink = [];
var list_sidedish = [];

function playAudio() {

}

// function fix
function searchMenu(type) {
    var searchKey = type;
    var value = list_menu()[searchKey];
    return value;
}

function PriceMenu(menu) {
    var searchKey = menu;
    var value = list_harga_menu()[searchKey];
    return value;
}

function check_and_add_menu(qty) {
    if (list_food.length > 0) {
        nama = list_food[list_food.length - 1]['nama'];
        harga = PriceMenu(nama);
        tambahPesanan(nama, qty, harga);
        messagePesanMakanan(qty, nama);
        list_food.length = 0;
    } else if (list_drink.length > 0) {
        nama = list_drink[list_drink.length - 1]['nama'];
        harga = PriceMenu(nama);
        tambahPesanan(nama, qty, harga);
        messagePesanMakanan(qty, nama);
        list_drink.length = 0;
    } else if (list_sidedish.length > 0) {
        nama = list_sidedish[list_sidedish.length - 1]['nama'];
        harga = PriceMenu(nama);
        tambahPesanan(nama, qty, harga);
        messagePesanMakanan(qty, nama);
        list_sidedish.length = 0;
    } else {
        messageWarningTambahPesanan();
    }
}

function checkQty() {
    if (list_food.length > 0 && list_drink.length > 0 || list_sidedish.length > 0) {
        if (qty > 10) {
            messageWarningMaxQty()
        }
    } else {
        messageWarningTambahPesanan();
    }
}

function checkListMenu() {
    if (daftarPesanan.length > 0) {
        return true;
    } else {
        return false;
    }
}

function CategoryMenu(menu) {
    var searchKey = menu;
    var value = list_category_menu()[searchKey];
    return value;
}

function checkFoodPesanan(nama) {
    var pesananBaru = {
        nama: nama,
    };
    list_food.push(pesananBaru);
}

function checkDrinkPesanan(nama) {
    var pesananBaru = {
        nama: nama,
    };
    list_food.push(pesananBaru);
}

function checkSidedishPesanan(nama) {
    var pesananBaru = {
        nama: nama,
    };
    list_food.push(pesananBaru);
}

function tambahPesanan(nama, jumlah, harga) {
    // Cek apakah pesanan sudah ada dalam daftar
    var pesananTerdaftar = false;
    for (var i = 0; i < daftarPesanan.length; i++) {
        if (daftarPesanan[i].nama === nama) {
            // Jika pesanan sudah ada, tambahkan jumlahnya
            daftarPesanan[i].jumlah += jumlah;
            daftarPesanan[i].harga += harga;
            pesananTerdaftar = true;
            break;
        }
    }

    // Jika pesanan belum terdaftar, tambahkan sebagai pesanan baru
    if (!pesananTerdaftar) {
        var pesananBaru = {
            nama: nama,
            jumlah: jumlah,
            harga: harga
        };
        daftarPesanan.push(pesananBaru);
    }
}

function hitungTotal() {
    for (var i = 0; i < daftarPesanan.length; i++) {
        var pesanan = daftarPesanan[i];
        totalHarga += pesanan.harga;
    }
    return totalHarga;
}

function messagePesanMakanan(qty, makanan) {
    INDEX2++;
    var str = "";
    str += "<div id='cm-msg2-" + INDEX2 + "' class=\"row chat-msg\">";
    str += "<div class=\"cm-msg-text2\">";
    str += "Oke " + qty + " pcs " + makanan + " sudah Mia catat ya...,";
    str += "<br>";
    str += "Masih mau tambah pesanan apa?? Makanan, Minuman atau Sidedish yang Mia punya?? <br> Atau Pesan ini dulu??";
    str += "<\/div><\/div>";

    // Tampilkan pesan dengan animasi 
    $(".chat-logs1").append(str);
    $("#cm-msg2-" + INDEX2).hide().fadeIn(300);

    // Scroll ke pesan terakhir
    $(".chat-logs1").stop().animate({ scrollTop: $(".chat-logs1")[0].scrollHeight }, 1000);
}

function messageJumlahPesanMakanan(makanan) {
    INDEX2++;
    var str = "";
    str += "<div id='cm-msg2-" + INDEX2 + "' class=\"row chat-msg\">";
    str += "<div class=\"cm-msg-text2\">";
    str += makanan + " ya,";
    str += "<br>";
    str += "Untuk sekarang " + makanan + "nya max pemesanannya 10 pax ya";
    str += "<br>";
    str += "Mau berapa banyak " + makanan + "nya?";
    str += "<\/div><\/div>";

    // Tampilkan pesan dengan animasi 
    $(".chat-logs1").append(str);
    $("#cm-msg2-" + INDEX2).hide().fadeIn(300);

    // Scroll ke pesan terakhir
    $(".chat-logs1").stop().animate({ scrollTop: $(".chat-logs1")[0].scrollHeight }, 1000);
}

function messageWarningTambahPesanan() {
    INDEX2++;
    var str = "";
    str += "<div id='cm-msg2-" + INDEX2 + "' class=\"row chat-msg\">";
    str += "<div class=\"cm-msg-text2\">";
    str += "Maaf kamu belum pesan sama Mia nih,";
    str += "silahkan pesan terlebih dahulu ya";
    str += "<br>";
    str += "Biar Mia Catat Pesanannya";
    str += "<\/div><\/div>";

    // Tampilkan pesan dengan animasi 
    $(".chat-logs1").append(str);
    $("#cm-msg2-" + INDEX2).hide().fadeIn(300);

    // Scroll ke pesan terakhir
    $(".chat-logs1").stop().animate({ scrollTop: $(".chat-logs1")[0].scrollHeight }, 1000);
}

function messagetampilkanPesanan(msg) {
    total = totalHarga;
    if (total == 0) {
        total = hitungTotal();
    }
    INDEX2++;
    var str = "";
    str += "<div id='cm-msg2-" + INDEX2 + "' class=\"row chat-msg" + "\">";
    str += "<div class=\"cm-msg-text2\">";
    str += msg;
    str += "<ul>";
    for (var i = 0; i < daftarPesanan.length; i++) {
        item = PriceMenu(daftarPesanan[i].nama);
        str += "<li>" + daftarPesanan[i].nama + " " + daftarPesanan[i].jumlah + " x " + formatRupiah(item) + " = " + formatRupiah(daftarPesanan[i].harga) + "</li>";
    }
    str += "</ul>";
    str += "Total harga: " + formatRupiah(total);
    str += "<br>";
    str += "Ingin Menambah Pesanan??";
    str += "<br>";
    str += "Atau pesan dan bayar??";
    str += "<\/div><\/div>";

    // Tampilkan pesan dengan animasi 
    $(".chat-logs1").append(str);
    $("#cm-msg2-" + INDEX2).hide().fadeIn(300);

    // Scroll ke pesan terakhir
    $(".chat-logs1").stop().animate({ scrollTop: $(".chat-logs1")[0].scrollHeight }, 1000);
}

function messagetampilkanPesananSelesai(msg) {
    total = totalHarga;
    if (total == 0) {
        total = hitungTotal();
    }
    INDEX2++;
    var str = "";
    str += "<div id='cm-msg2-" + INDEX2 + "' class=\"row chat-msg" + "\">";
    str += "<div class=\"cm-msg-text2\">";
    str += msg;
    str += "Berikut List Pesananmu :";
    str += "<ul>";
    for (var i = 0; i < daftarPesanan.length; i++) {
        item = PriceMenu(daftarPesanan[i].nama);
        str += "<li>" + daftarPesanan[i].nama + " " + daftarPesanan[i].jumlah + " x " + formatRupiah(item) + " = " + formatRupiah(daftarPesanan[i].harga) + "</li>";
    }
    str += "</ul>";
    str += "Total harga: " + formatRupiah(total);
    str += "<br>";
    str += "Terima Kasih Sudah Memesan";
    str += "<\/div><\/div>";

    // Tampilkan pesan dengan animasi 
    $(".chat-logs1").append(str);
    $("#cm-msg2-" + INDEX2).hide().fadeIn(300);

    // Scroll ke pesan terakhir
    $(".chat-logs1").stop().animate({ scrollTop: $(".chat-logs1")[0].scrollHeight }, 1000);
}

function messagePayment(msg) {
    total = totalHarga;
    if (total == 0) {
        total = hitungTotal();
    }
    INDEX2++;
    var str = "";
    str += "<div id='cm-msg2-" + INDEX2 + "' class=\"row chat-msg" + "\">";
    str += "<div class=\"cm-msg-text2\">";
    str += msg;
    str += "<ul>";
    str += "<li>Cash (Dibayarkan kepada kasir)</li>";
    str += "<li>Transfer (Di Transfer Ke BCA 8300197176 a/n Vicky)</li>";
    str += "</ul>";
    str += "Total Yang Harus Dibayar : " + formatRupiah(total);
    str += "<br>";
    str += "Terima Kasih";
    str += "<\/div><\/div>";

    // Tampilkan pesan dengan animasi 
    $(".chat-logs1").append(str);
    $("#cm-msg2-" + INDEX2).hide().fadeIn(300);

    // Scroll ke pesan terakhir
    $(".chat-logs1").stop().animate({ scrollTop: $(".chat-logs1")[0].scrollHeight }, 1000);
}

function messageWarningMaxQty() {
    INDEX2++;
    var str = "";
    str += "<div id='cm-msg2-" + INDEX2 + "' class=\"row chat-msg\">";
    str += "<div class=\"cm-msg-text2\">";
    str += "Mohon Maaf, untuk sekarang pesanannya maximal 10 pax nih.";
    str += "<br>";
    str += "Silahkan masukkan jumlahnya lagi ya.";
    str += "<\/div><\/div>";

    // Tampilkan pesan dengan animasi 
    $(".chat-logs1").append(str);
    $("#cm-msg2-" + INDEX2).hide().fadeIn(300);

    // Scroll ke pesan terakhir
    $(".chat-logs1").stop().animate({ scrollTop: $(".chat-logs1")[0].scrollHeight }, 1000);
}

function generate_message1(msg, type) {
    INDEX1++;
    var str = "";
    str += "<div id='cm-msg1-" + INDEX1 + "' class=\"row chat-msg" + type + "\">";
    str += "<div class=\"cm-msg-text1 col-md\">";
    str += msg;
    str += "<\/div><\/div>";

    // Tampilkan pesan dengan animasi 
    $(".chat-logs1").append(str);
    $("#cm-msg1-" + INDEX1).hide().fadeIn(300);

    // Jika pesan dikirim dari HP 1, hapus text pada input text HP 1
    if (type == 'self') {
        $("#chat-input1").val('');
    }

    // Scroll ke pesan terakhir
    $(".chat-logs1").stop().animate(
        {
            scrollTop: $(".chat-logs1")[0].scrollHeight
        }, 1000);
}

function generate_message2(msg, type) {
    INDEX2++;
    var str = "";
    str += "<div id='cm-msg2-" + INDEX2 + "' class=\"row chat-msg" + type + "\">";
    str += "<div class=\"cm-msg-text2\">";
    str += msg;
    str += "<\/div><\/div>";

    // Tampilkan pesan dengan animasi 
    $(".chat-logs1").append(str);
    $("#cm-msg2-" + INDEX2).hide().fadeIn(300);

    // Scroll ke pesan terakhir
    $(".chat-logs1").stop().animate({ scrollTop: $(".chat-logs1")[0].scrollHeight }, 1000);
}

function generate_menu(msg, list_menu, type) {
    INDEX2++;
    var str = "";
    str += "<div id='cm-msg2-" + INDEX2 + "' class=\"row chat-msg" + type + "\">";
    str += "<div class=\"cm-msg-text2\">";
    str += msg;
    str += "<ul>";
    str += "<table>";
    list_menu.forEach(item => {
        harga = PriceMenu(item);
        str += "<tr>";
        str += "<td>";
        str += "<li>";
        str += item
        str += "</li>";
        str += "</td>";
        str += "<td>";
        str += " : " + formatRupiah(harga);
        str += "</td>";
        str += "</tr>";
    });
    str += "</table>";
    str += "</ul>";
    str += "<p>Silakan pilih menu yang Anda inginkan.</p>"
    str += "<\/div><\/div>";

    // Tampilkan pesan dengan animasi 
    $(".chat-logs1").append(str);
    $("#cm-msg2-" + INDEX2).hide().fadeIn(300);

    // Scroll ke pesan terakhir
    $(".chat-logs1").stop().animate({ scrollTop: $(".chat-logs1")[0].scrollHeight }, 1000);
}

const formatRupiah = (money) => {
    return new Intl.NumberFormat('id-ID',
        { style: 'currency', currency: 'IDR', minimumFractionDigits: 0 }
    ).format(money);
}

// end function fix